# Apps:dockge
# Storage = '/mnt/Arcanum/Apps'

# https://github.com/9001/copyparty/blob/hovudstraum/docs/examples/docker/basic-docker-compose/copyparty.conf
# https://github.com/9001/copyparty/blob/hovudstraum/docs/example.conf

configs:
  copyparty.conf:
    content: |
      [global]
        name: truenas
        p: 9900
        theme: 2
        ansi
        e2dsa
        e2ts
      [accounts]
        admin: admin
      [/Media]
        /media
        accs:
          r: *
          rwmda: admin
        flags:
          ui_nolbar, ui_norepl
      [/Documents]
        /documents
        accs:
          rwmda: admin
        flags:
          ui_nolbar, ui_norepl
      [/TRPG]
        /trpg
        accs:
          rwmda: admin
        flags:
          ui_nolbar, ui_norepl

services:
  copyparty:
    image: "ghcr.io/9001/copyparty-ac:latest"
    container_name: "copyparty"
    restart: "unless-stopped"
    ports:
      - "9900:9900/tcp"
    environment:
      - "LD_PRELOAD=/usr/lib/libmimalloc-secure.so.2"
    configs:
      - source: "copyparty.conf"
        target: "/cfg/copyparty.conf"
    volumes:
      - "/mnt/Mundorum/Media:/media"
      - "/mnt/Mundorum/Documents:/documents"
      - "/mnt/Mundorum/TRPG:/trpg"
