---
# yaml-language-server: $schema=https://kubernetes-schemas.noirprime.com/operator.victoriametrics.com/vmagent_v1beta1.json
apiVersion: operator.victoriametrics.com/v1beta1
kind: VMAgent
metadata:
  name: victoria-metrics-vmagent
spec:
  selectAllByDefault: true
  remoteWrite:
    - url: "http://victoria-metrics-vmsingle.monitoring-system.svc.cluster.local:8429/api/v1/write"
  extraArgs:
    promscrape.maxScrapeSize: 50MiB
    promscrape.streamParse: "true"
    promscrape.dropOriginalLabels: "true"
  resources:
    requests:
      cpu: 500m
    limits:
      memory: 1Gi
